-- MySQL Script generated by MySQL Workbench
-- Sun Nov 27 06:59:34 2016
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

DROP TABLE IF EXISTS `MUNICIPIO` ;
DROP TABLE IF EXISTS `FAVORECIDO` ;
DROP TABLE IF EXISTS `PROGRAMA` ;
DROP TABLE IF EXISTS `PAGAMENTO` ;
DROP TABLE IF EXISTS `FUNCAO` ;
DROP TABLE IF EXISTS `SUBFUNCAO` ;
DROP TABLE IF EXISTS `ACAO` ;

-- -----------------------------------------------------
-- Table `MUNICIPIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MUNICIPIO` (
  `CODIGO_SIAFI_MUNICIPIO` VARCHAR(4) NOT NULL,
  `NOME_MUNICIPIO` VARCHAR(15) NULL,
  `UF` VARCHAR(2) NULL,
  PRIMARY KEY (`CODIGO_SIAFI_MUNICIPIO`));
  CREATE UNIQUE INDEX `siafi_UNIQUE` ON `MUNICIPIO` (`CODIGO_SIAFI_MUNICIPIO` ASC);

-- -----------------------------------------------------
-- Table `FAVORECIDO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `FAVORECIDO` (
  `NIS_FAVORECIDO` VARCHAR(15) NOT NULL,
  `NOME_FAVORECIDO` VARCHAR(40) NULL,
  `MUNICIPIO_CODIGO_SIAFI_MUNICIPIO` VARCHAR(4) NOT NULL,
  PRIMARY KEY (`NIS_FAVORECIDO`),
  CONSTRAINT `fk_FAVORECIDO_MUNICIPIO`
    FOREIGN KEY (`MUNICIPIO_CODIGO_SIAFI_MUNICIPIO`)
    REFERENCES `MUNICIPIO` (`CODIGO_SIAFI_MUNICIPIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
    CREATE UNIQUE INDEX `NIS_FAVORECIDO_UNIQUE` ON `FAVORECIDO` (`NIS_FAVORECIDO` ASC);
    CREATE INDEX `fk_FAVORECIDO_MUNICIPIO_idx` ON `FAVORECIDO` (`MUNICIPIO_CODIGO_SIAFI_MUNICIPIO` ASC);


-- -----------------------------------------------------
-- Table `mydb`.`PROGRAMA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PROGRAMA` (
  `CODIGO_PROGRAMA` VARCHAR(4) NOT NULL,
  `NOME_PROGRAMA` VARCHAR(40) NULL,
  PRIMARY KEY (`CODIGO_PROGRAMA`));


-- -----------------------------------------------------
-- Table `mydb`.`PAGAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PAGAMENTO` (
  `PROGRAMA_CODIGO_PROGRAMA` VARCHAR(4) NOT NULL,
  `FAVORECIDO_NIS_FAVORECIDO` VARCHAR(15) NOT NULL,
  `MES_COMPETENCIA` VARCHAR(10) NOT NULL,
  `VALOR_PARCELA` VARCHAR(8) NULL,
  PRIMARY KEY (`PROGRAMA_CODIGO_PROGRAMA`, `FAVORECIDO_NIS_FAVORECIDO`, `MES_COMPETENCIA`),
  CONSTRAINT `fk_PROGRAMA_has_FAVORECIDO_PROGRAMA1`
    FOREIGN KEY (`PROGRAMA_CODIGO_PROGRAMA`)
    REFERENCES `PROGRAMA` (`CODIGO_PROGRAMA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PROGRAMA_has_FAVORECIDO_FAVORECIDO1`
    FOREIGN KEY (`FAVORECIDO_NIS_FAVORECIDO`)
    REFERENCES `FAVORECIDO` (`NIS_FAVORECIDO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
    CREATE INDEX `fk_PROGRAMA_has_FAVORECIDO_FAVORECIDO1_idx` ON `PAGAMENTO` (`FAVORECIDO_NIS_FAVORECIDO` ASC);
    CREATE INDEX `fk_PROGRAMA_has_FAVORECIDO_PROGRAMA1_idx` ON `PAGAMENTO` (`PROGRAMA_CODIGO_PROGRAMA` ASC);


-- -----------------------------------------------------
-- Table `mydb`.`FUNCAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `FUNCAO` (
  `CODIGO_FUNCAO` VARCHAR(2) NOT NULL,
  `NOME_FUNCAO` VARCHAR(40) NULL,
  PRIMARY KEY (`CODIGO_FUNCAO`));


-- -----------------------------------------------------
-- Table `mydb`.`SUBFUNCAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SUBFUNCAO` (
  `CODIGO_SUBFUNCAO` VARCHAR(3) NOT NULL,
  `NOME_SUBFUNCAO` VARCHAR(40) NULL,
  `FUNCAO_CODIGO_FUNCAO` VARCHAR(2) NOT NULL,
  PRIMARY KEY (`CODIGO_SUBFUNCAO`),
  CONSTRAINT `fk_SUBFUNCAO_FUNCAO1`
    FOREIGN KEY (`FUNCAO_CODIGO_FUNCAO`)
    REFERENCES `FUNCAO` (`CODIGO_FUNCAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
    CREATE INDEX `fk_SUBFUNCAO_FUNCAO1_idx` ON `SUBFUNCAO` (`FUNCAO_CODIGO_FUNCAO` ASC);


-- -----------------------------------------------------
-- Table `mydb`.`ACAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ACAO` (
  `CODIGO_ACAO` VARCHAR(4) NOT NULL,
  `NOME_ACAO` VARCHAR(40) NULL,
  `FONTE_FINALIDADE` VARCHAR(40) NULL,
  `PROGRAMA_CODIGO_PROGRAMA` VARCHAR(4) NOT NULL,
  `SUBFUNCAO_CODIGO_SUBFUNCAO` VARCHAR(3) NOT NULL,
  PRIMARY KEY (`CODIGO_ACAO`, `PROGRAMA_CODIGO_PROGRAMA`),
  CONSTRAINT `fk_ACAO_PROGRAMA1`
    FOREIGN KEY (`PROGRAMA_CODIGO_PROGRAMA`)
    REFERENCES `PROGRAMA` (`CODIGO_PROGRAMA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ACAO_SUBFUNCAO1`
    FOREIGN KEY (`SUBFUNCAO_CODIGO_SUBFUNCAO`)
    REFERENCES `SUBFUNCAO` (`CODIGO_SUBFUNCAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
    CREATE INDEX `fk_ACAO_PROGRAMA1_idx` ON `ACAO` (`PROGRAMA_CODIGO_PROGRAMA` ASC);
    CREATE INDEX `fk_ACAO_SUBFUNCAO1_idx` ON `ACAO` (`SUBFUNCAO_CODIGO_SUBFUNCAO` ASC);
